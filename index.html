<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap Builder - Drag & Drop Website Builder</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        id="bootstrapTheme">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Builder CSS -->
    <link href="css/builder.css" rel="stylesheet">
</head>

<body>
    <!-- Top Toolbar -->
    <nav class="toolbar">
        <div class="toolbar-brand">
            <i class="bi bi-bootstrap-fill"></i>
            <span>Bootstrap Builder</span>
        </div>
        <div class="toolbar-actions">
            <!-- Theme Selector -->
            <div class="theme-selector me-2">
                <select id="themeSelect" class="form-select form-select-sm bg-dark text-light border-secondary">
                    <option value="default">Default Theme</option>
                    <option value="cerulean">Cerulean</option>
                    <option value="cosmo">Cosmo</option>
                    <option value="cyborg">Cyborg</option>
                    <option value="darkly">Darkly</option>
                    <option value="flatly">Flatly</option>
                    <option value="journal">Journal</option>
                    <option value="litera">Litera</option>
                    <option value="lumen">Lumen</option>
                    <option value="lux">Lux</option>
                    <option value="materia">Materia</option>
                    <option value="minty">Minty</option>
                    <option value="morph">Morph</option>
                    <option value="pulse">Pulse</option>
                    <option value="quartz">Quartz</option>
                    <option value="sandstone">Sandstone</option>
                    <option value="simplex">Simplex</option>
                    <option value="sketchy">Sketchy</option>
                    <option value="slate">Slate</option>
                    <option value="solar">Solar</option>
                    <option value="spacelab">Spacelab</option>
                    <option value="superhero">Superhero</option>
                    <option value="united">United</option>
                    <option value="vapor">Vapor</option>
                    <option value="yeti">Yeti</option>
                    <option value="zephyr">Zephyr</option>
                </select>
            </div>
            <div class="toolbar-divider"></div>
            <button class="btn-tool" id="btnUndo" title="Undo (Ctrl+Z)">
                <i class="bi bi-arrow-counterclockwise"></i>
            </button>
            <button class="btn-tool" id="btnRedo" title="Redo (Ctrl+Y)">
                <i class="bi bi-arrow-clockwise"></i>
            </button>
            <button class="btn-tool" id="btnClear" title="Clear Canvas">
                <i class="bi bi-trash3"></i>
            </button>
            <div class="toolbar-divider"></div>
            <button class="btn-tool" id="btnPreview" title="Preview">
                <i class="bi bi-eye"></i>
            </button>
            <button class="btn-download" id="btnDownload">
                <i class="bi bi-download"></i>
                Download HTML
            </button>
        </div>
    </nav>

    <!-- Main Layout -->
    <div class="builder-layout">
        <!-- Components Sidebar -->
        <aside class="sidebar" id="componentsSidebar">
            <div class="sidebar-header">
                <h5><i class="bi bi-grid-3x3-gap"></i> Components</h5>
            </div>
            <div class="sidebar-search">
                <input type="text" class="form-control form-control-sm" id="searchComponents"
                    placeholder="Search components...">
            </div>
            <div class="components-list" id="componentsList">
                <!-- Components will be populated by JS -->
            </div>
        </aside>

        <!-- Canvas Area -->
        <main class="canvas-wrapper">
            <div class="canvas-header">
                <span class="canvas-title"><i class="bi bi-palette"></i> Canvas</span>
                <div class="canvas-info">
                    <span id="componentCount">0 components</span>
                    <span class="edit-mode-badge" id="editModeBadge">
                        <i class="bi bi-pencil"></i> Click text to edit
                    </span>
                </div>
            </div>
            <div class="canvas-container">
                <div class="canvas" id="canvas">
                    <div class="canvas-placeholder" id="canvasPlaceholder">
                        <i class="bi bi-plus-circle"></i>
                        <p>Drag components here to start building</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Code Preview Panel -->
        <aside class="code-panel">
            <div class="code-header">
                <div class="code-tabs">
                    <button class="code-tab active">
                        <i class="bi bi-code-slash"></i> HTML Preview
                    </button>
                </div>
                <button class="btn-tool btn-copy" id="btnCopyCode" title="Copy Code">
                    <i class="bi bi-clipboard"></i>
                </button>
            </div>
            <div class="code-content">
                <pre><code id="codePreview"></code></pre>
            </div>
        </aside>

        <!-- Properties Panel -->
        <aside class="properties-panel" id="propertiesPanel">
            <div class="properties-header">
                <h5><i class="bi bi-sliders"></i> Properties</h5>
            </div>
            <div class="properties-content" id="propertiesContent">
                <div class="properties-empty">
                    <i class="bi bi-cursor"></i>
                    <p>Select a component to edit its properties</p>
                </div>
            </div>

            <!-- Properties Template (hidden, used when component selected) -->
            <div class="properties-form" id="propertiesForm" style="display: none;">
                <!-- Background Section -->
                <div class="property-section">
                    <div class="property-section-header">
                        <i class="bi bi-paint-bucket"></i> Background
                    </div>
                    <div class="property-group">
                        <label class="property-label">Background Color</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="bgColor" class="color-picker" value="#ffffff">
                            <input type="text" id="bgColorText" class="form-control form-control-sm color-text"
                                value="#ffffff">
                        </div>
                    </div>
                    <div class="property-group">
                        <label class="property-label">Background Type</label>
                        <select id="bgType" class="form-select form-select-sm">
                            <option value="color">Solid Color</option>
                            <option value="gradient">Gradient</option>
                            <option value="transparent">Transparent</option>
                        </select>
                    </div>
                    <div class="property-group gradient-options" id="gradientOptions" style="display:none;">
                        <label class="property-label">Gradient End Color</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="bgGradientEnd" class="color-picker" value="#667eea">
                            <input type="text" id="bgGradientEndText" class="form-control form-control-sm color-text"
                                value="#667eea">
                        </div>
                    </div>
                </div>

                <!-- Text Color Section -->
                <div class="property-section">
                    <div class="property-section-header">
                        <i class="bi bi-fonts"></i> Text
                    </div>
                    <div class="property-group">
                        <label class="property-label">Text Color</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="textColor" class="color-picker" value="#000000">
                            <input type="text" id="textColorText" class="form-control form-control-sm color-text"
                                value="#000000">
                        </div>
                    </div>
                </div>

                <!-- Link Editor Section -->
                <div class="property-section" id="linkSection" style="display:none;">
                    <div class="property-section-header">
                        <i class="bi bi-link-45deg"></i> Link
                    </div>
                    <div class="property-group">
                        <label class="property-label">Link URL</label>
                        <input type="text" id="linkUrl" class="form-control form-control-sm" placeholder="https://...">
                    </div>
                    <div class="property-group">
                        <label class="property-label">Link Target</label>
                        <select id="linkTarget" class="form-select form-select-sm">
                            <option value="_self">Same Window</option>
                            <option value="_blank">New Tab</option>
                        </select>
                    </div>
                </div>

                <!-- Image Editor Section -->
                <div class="property-section" id="imageSection" style="display:none;">
                    <div class="property-section-header">
                        <i class="bi bi-image"></i> Image
                    </div>
                    <div class="property-group">
                        <label class="property-label">Image URL</label>
                        <input type="text" id="imageUrl" class="form-control form-control-sm"
                            placeholder="https://picsum.photos/...">
                    </div>
                    <div class="property-group">
                        <label class="property-label">Alt Text</label>
                        <input type="text" id="imageAlt" class="form-control form-control-sm"
                            placeholder="Image description">
                    </div>
                    <div class="property-group">
                        <button type="button" id="btnRandomImage" class="btn btn-outline-primary btn-sm w-100">
                            <i class="bi bi-shuffle me-1"></i> Random Picsum Image
                        </button>
                    </div>
                </div>

                <!-- Spacing Section -->
                <div class="property-section">
                    <div class="property-section-header">
                        <i class="bi bi-arrows-expand"></i> Spacing
                    </div>
                    <div class="property-group">
                        <label class="property-label">Padding</label>
                        <select id="padding" class="form-select form-select-sm">
                            <option value="">None</option>
                            <option value="p-1">Extra Small</option>
                            <option value="p-2">Small</option>
                            <option value="p-3">Medium</option>
                            <option value="p-4">Large</option>
                            <option value="p-5">Extra Large</option>
                        </select>
                    </div>
                    <div class="property-group">
                        <label class="property-label">Margin</label>
                        <select id="margin" class="form-select form-select-sm">
                            <option value="">None</option>
                            <option value="my-1">Extra Small</option>
                            <option value="my-2">Small</option>
                            <option value="my-3">Medium</option>
                            <option value="my-4">Large</option>
                            <option value="my-5">Extra Large</option>
                        </select>
                    </div>
                </div>

                <!-- Component Options (shown for specific components) -->
                <div class="property-section" id="componentOptionsSection" style="display:none;">
                    <div class="property-section-header">
                        <i class="bi bi-sliders"></i> Component Options
                    </div>
                    <!-- Item Count -->
                    <div class="property-group" id="itemCountGroup" style="display:none;">
                        <label class="property-label">Number of Items</label>
                        <div class="d-flex align-items-center gap-2">
                            <input type="number" id="itemCount" class="form-control form-control-sm" min="1" max="12"
                                value="4">
                            <button type="button" id="btnApplyItemCount" class="btn btn-primary btn-sm">Apply</button>
                        </div>
                    </div>
                    <!-- Progress Percentage -->
                    <div class="property-group" id="progressGroup" style="display:none;">
                        <label class="property-label">Progress: <span id="progressValue">50</span>%</label>
                        <input type="range" id="progressPercent" class="form-range" min="0" max="100" value="50">
                    </div>
                    <!-- Accordion Items -->
                    <div class="property-group" id="accordionGroup" style="display:none;">
                        <label class="property-label">Accordion Items</label>
                        <div class="d-flex align-items-center gap-2">
                            <input type="number" id="accordionCount" class="form-control form-control-sm" min="2"
                                max="10" value="3">
                            <button type="button" id="btnApplyAccordion" class="btn btn-primary btn-sm">Apply</button>
                        </div>
                    </div>
                </div>

                <!-- Row/Column Management (shown for layout components) -->
                <div class="property-section" id="layoutSection" style="display:none;">
                    <div class="property-section-header">
                        <i class="bi bi-layout-three-columns"></i> Layout
                    </div>
                    <div class="property-group">
                        <label class="property-label">Columns</label>
                        <div class="btn-group-sm d-flex gap-2">
                            <button type="button" class="btn btn-outline-primary flex-fill" id="btnAddColumn">
                                <i class="bi bi-plus"></i> Add
                            </button>
                            <button type="button" class="btn btn-outline-danger flex-fill" id="btnRemoveColumn">
                                <i class="bi bi-dash"></i> Remove
                            </button>
                        </div>
                    </div>
                    <div class="property-group">
                        <label class="property-label">Column Width</label>
                        <select id="columnWidth" class="form-select form-select-sm">
                            <option value="col">Auto</option>
                            <option value="col-6">50%</option>
                            <option value="col-4">33%</option>
                            <option value="col-3">25%</option>
                            <option value="col-2">16%</option>
                        </select>
                    </div>
                </div>

                <!-- Actions -->
                <div class="property-section">
                    <div class="property-section-header">
                        <i class="bi bi-gear"></i> Actions
                    </div>
                    <div class="property-actions">
                        <button type="button" class="btn btn-sm btn-outline-secondary w-100 mb-2" id="btnDuplicateComp">
                            <i class="bi bi-copy"></i> Duplicate
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-danger w-100" id="btnDeleteComp">
                            <i class="bi bi-trash3"></i> Delete
                        </button>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Clear Canvas Confirmation Modal -->
    <div class="modal fade" id="clearCanvasModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-danger text-white border-0">
                    <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i> Clear Canvas</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body p-4 text-center text-white bg-dark">
                    <div class="mb-3">
                        <i class="bi bi-trash3 text-danger" style="font-size: 3rem; opacity: 0.8;"></i>
                    </div>
                    <h4>Are you absolutely sure?</h4>
                    <p class="text-secondary mb-0">This will permanently remove all components from your current design.
                        This action cannot be undone.</p>
                </div>
                <div class="modal-footer bg-dark border-0 pt-0 pb-4 justify-content-center gap-2">
                    <button type="button" class="btn btn-outline-secondary px-4" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" id="confirmClearBtn" class="btn btn-danger px-4">Yes, Clear
                        Everything</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="modal fade" id="previewModal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-eye"></i> Preview</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0">
                    <iframe id="previewFrame" class="preview-frame"></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- Component Context Menu -->
    <div class="context-menu" id="contextMenu">
        <button class="context-item" data-action="duplicate">
            <i class="bi bi-copy"></i> Duplicate
        </button>
        <button class="context-item" data-action="moveUp">
            <i class="bi bi-arrow-up"></i> Move Up
        </button>
        <button class="context-item" data-action="moveDown">
            <i class="bi bi-arrow-down"></i> Move Down
        </button>
        <button class="context-item" data-action="addColumn">
            <i class="bi bi-plus-square"></i> Add Column
        </button>
        <div class="context-divider"></div>
        <button class="context-item danger" data-action="delete">
            <i class="bi bi-trash3"></i> Delete
        </button>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Builder JS -->
    <script src="js/components.js"></script>
    <script src="js/dragdrop.js"></script>
    <script src="js/generator.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/app.js"></script>
</body>

</html>